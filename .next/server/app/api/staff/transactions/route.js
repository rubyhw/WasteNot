"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/staff/transactions/route";
exports.ids = ["app/api/staff/transactions/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Ruby_Documents_1_Assignments_WasteNot_app_api_staff_transactions_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/staff/transactions/route.js */ \"(rsc)/./app/api/staff/transactions/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/staff/transactions/route\",\n        pathname: \"/api/staff/transactions\",\n        filename: \"route\",\n        bundlePath: \"app/api/staff/transactions/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Ruby\\\\Documents\\\\1. Assignments\\\\WasteNot\\\\app\\\\api\\\\staff\\\\transactions\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Ruby_Documents_1_Assignments_WasteNot_app_api_staff_transactions_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/staff/transactions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdGFmZiUyRnRyYW5zYWN0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3RhZmYlMkZ0cmFuc2FjdGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdGFmZiUyRnRyYW5zYWN0aW9ucyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNSdWJ5JTVDRG9jdW1lbnRzJTVDMS4lMjBBc3NpZ25tZW50cyU1Q1dhc3RlTm90JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNSdWJ5JTVDRG9jdW1lbnRzJTVDMS4lMjBBc3NpZ25tZW50cyU1Q1dhc3RlTm90JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QztBQUMxSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3dhc3Rlbm90Lz81ZGVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFJ1YnlcXFxcRG9jdW1lbnRzXFxcXDEuIEFzc2lnbm1lbnRzXFxcXFdhc3RlTm90XFxcXGFwcFxcXFxhcGlcXFxcc3RhZmZcXFxcdHJhbnNhY3Rpb25zXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0YWZmL3RyYW5zYWN0aW9ucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFJ1YnlcXFxcRG9jdW1lbnRzXFxcXDEuIEFzc2lnbm1lbnRzXFxcXFdhc3RlTm90XFxcXGFwcFxcXFxhcGlcXFxcc3RhZmZcXFxcdHJhbnNhY3Rpb25zXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/staff/transactions/route.js":
/*!*********************************************!*\
  !*** ./app/api/staff/transactions/route.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\nconst supabaseUrl = \"https://ggeqsopunlnzhmsxpkxq.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nasync function GET(request) {\n    try {\n        // Get authenticated user (staff) ID\n        let user = null;\n        const authHeader = request.headers.get(\"authorization\");\n        if (authHeader && authHeader.startsWith(\"Bearer \")) {\n            const token = authHeader.substring(7);\n            const supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\");\n            const { data: { user: authUser }, error: authError } = await supabaseClient.auth.getUser(token);\n            if (!authError && authUser) {\n                user = authUser;\n            }\n        }\n        if (!user) {\n            const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n            const supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\", {\n                cookies: {\n                    get (name) {\n                        return cookieStore.get(name)?.value;\n                    }\n                }\n            });\n            const { data: { user: cookieUser }, error: cookieError } = await supabaseClient.auth.getUser();\n            if (!cookieError && cookieUser) {\n                user = cookieUser;\n            }\n        }\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const collectionCentreId = user.id;\n        // Use service role key for server-side operations\n        const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\");\n        // Get URL parameters\n        const { searchParams } = new URL(request.url);\n        const recyclerId = searchParams.get(\"recyclerId\");\n        const period = searchParams.get(\"period\"); // e.g. 'month' or 'year'\n        // Fetch transactions with related data\n        let query = supabase.from(\"recycling_transactions\").select(`\r\n        id,\r\n        session_id,\r\n        quantity,\r\n        item_id,\r\n        recycler_id,\r\n        collection_centre_id,\r\n        created_at,\r\n        recycler:recycler_id (\r\n          id,\r\n          public_id,\r\n          full_name\r\n        )\r\n      `).eq(\"collection_centre_id\", collectionCentreId);\n        // Optional: filter by current month or current year\n        if (period === \"month\" || period === \"year\") {\n            const now = new Date();\n            let start;\n            let end;\n            if (period === \"month\") {\n                start = new Date(now.getFullYear(), now.getMonth(), 1);\n                end = new Date(now.getFullYear(), now.getMonth() + 1, 1);\n            } else {\n                // year\n                start = new Date(now.getFullYear(), 0, 1);\n                end = new Date(now.getFullYear() + 1, 0, 1);\n            }\n            query = query.gte(\"created_at\", start.toISOString()).lt(\"created_at\", end.toISOString());\n        }\n        query = query.order(\"created_at\", {\n            ascending: false\n        });\n        // If recyclerId is provided, filter by that recycler\n        if (recyclerId) {\n            query = query.eq(\"recycler_id\", recyclerId);\n        }\n        const { data: transactions, error } = await query;\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Fetch item names from recyclable_items table\n        const itemIds = [\n            ...new Set(transactions.map((tx)=>tx.item_id))\n        ];\n        const { data: items } = await supabase.from(\"recyclable_items\").select(\"id, name\").in(\"id\", itemIds);\n        const itemMap = {};\n        if (items) {\n            items.forEach((item)=>{\n                itemMap[item.id] = item.name;\n            });\n        }\n        // Weight-based items (stored as grams, need to convert back to kg)\n        const weightBasedItems = [\n            3,\n            5\n        ]; // Newspaper and Cardboard\n        // Helper function to convert quantity based on item type\n        const getDisplayQuantity = (itemId, quantity)=>{\n            if (weightBasedItems.includes(itemId)) {\n                return quantity / 1000; // Convert grams back to kg\n            }\n            return quantity;\n        };\n        // Calculate totals per item for the collection centre\n        const centreTotals = {};\n        transactions.forEach((tx)=>{\n            const itemName = itemMap[tx.item_id] || `Item ${tx.item_id}`;\n            if (!centreTotals[itemName]) {\n                centreTotals[itemName] = 0;\n            }\n            centreTotals[itemName] += getDisplayQuantity(tx.item_id, tx.quantity);\n        });\n        // Calculate totals per item for a specific recycler (if recyclerId provided)\n        const recyclerTotals = {};\n        if (recyclerId) {\n            transactions.forEach((tx)=>{\n                const itemName = itemMap[tx.item_id] || `Item ${tx.item_id}`;\n                if (!recyclerTotals[itemName]) {\n                    recyclerTotals[itemName] = 0;\n                }\n                recyclerTotals[itemName] += getDisplayQuantity(tx.item_id, tx.quantity);\n            });\n        }\n        // Convert transaction quantities for display (grams to kg for weight items)\n        const displayTransactions = transactions.map((tx)=>({\n                ...tx,\n                displayQuantity: getDisplayQuantity(tx.item_id, tx.quantity)\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            transactions: displayTransactions,\n            centreTotals,\n            recyclerTotals: recyclerId ? recyclerTotals : null\n        });\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N0YWZmL3RyYW5zYWN0aW9ucy9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBQ1Y7QUFDSjtBQUV2QyxNQUFNRyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUV6RCxlQUFlQyxJQUFJQyxPQUFPO0lBQy9CLElBQUk7UUFDRixvQ0FBb0M7UUFDcEMsSUFBSUMsT0FBTztRQUVYLE1BQU1DLGFBQWFGLFFBQVFHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ3ZDLElBQUlGLGNBQWNBLFdBQVdHLFVBQVUsQ0FBQyxZQUFZO1lBQ2xELE1BQU1DLFFBQVFKLFdBQVdLLFNBQVMsQ0FBQztZQUNuQyxNQUFNQyxpQkFBaUJsQixtRUFBWUEsQ0FDakNHLGFBQ0FDLGtOQUF5QztZQUUzQyxNQUFNLEVBQUVnQixNQUFNLEVBQUVULE1BQU1VLFFBQVEsRUFBRSxFQUFFQyxPQUFPQyxTQUFTLEVBQUUsR0FBRyxNQUFNTCxlQUFlTSxJQUFJLENBQUNDLE9BQU8sQ0FBQ1Q7WUFDekYsSUFBSSxDQUFDTyxhQUFhRixVQUFVO2dCQUMxQlYsT0FBT1U7WUFDVDtRQUNGO1FBRUEsSUFBSSxDQUFDVixNQUFNO1lBQ1QsTUFBTWUsY0FBYyxNQUFNeEIscURBQU9BO1lBQ2pDLE1BQU1nQixpQkFBaUJsQixtRUFBWUEsQ0FDakNHLGFBQ0FDLGtOQUF5QyxFQUN6QztnQkFDRUYsU0FBUztvQkFDUFksS0FBSWEsSUFBSTt3QkFDTixPQUFPRCxZQUFZWixHQUFHLENBQUNhLE9BQU9DO29CQUNoQztnQkFDRjtZQUNGO1lBRUYsTUFBTSxFQUFFUixNQUFNLEVBQUVULE1BQU1rQixVQUFVLEVBQUUsRUFBRVAsT0FBT1EsV0FBVyxFQUFFLEdBQUcsTUFBTVosZUFBZU0sSUFBSSxDQUFDQyxPQUFPO1lBQzVGLElBQUksQ0FBQ0ssZUFBZUQsWUFBWTtnQkFDOUJsQixPQUFPa0I7WUFDVDtRQUNGO1FB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Iiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FzdGVub3QvLi9hcHAvYXBpL3N0YWZmL3RyYW5zYWN0aW9ucy9yb3V0ZS5qcz9iNzAzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgYXV0aGVudGljYXRlZCB1c2VyIChzdGFmZikgSURcclxuICAgIGxldCB1c2VyID0gbnVsbDtcclxuICAgIFxyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKTtcclxuICAgIGlmIChhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlQ2xpZW50ID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyOiBhdXRoVXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5hdXRoLmdldFVzZXIodG9rZW4pO1xyXG4gICAgICBpZiAoIWF1dGhFcnJvciAmJiBhdXRoVXNlcikge1xyXG4gICAgICAgIHVzZXIgPSBhdXRoVXNlcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlQ2xpZW50ID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvb2tpZXM6IHtcclxuICAgICAgICAgICAgZ2V0KG5hbWUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogY29va2llVXNlciB9LCBlcnJvcjogY29va2llRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LmF1dGguZ2V0VXNlcigpO1xyXG4gICAgICBpZiAoIWNvb2tpZUVycm9yICYmIGNvb2tpZVVzZXIpIHtcclxuICAgICAgICB1c2VyID0gY29va2llVXNlcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb2xsZWN0aW9uQ2VudHJlSWQgPSB1c2VyLmlkO1xyXG5cclxuICAgIC8vIFVzZSBzZXJ2aWNlIHJvbGUga2V5IGZvciBzZXJ2ZXItc2lkZSBvcGVyYXRpb25zXHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcclxuICAgICAgc3VwYWJhc2VVcmwsXHJcbiAgICAgIHN1cGFiYXNlU2VydmljZUtleSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBHZXQgVVJMIHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcclxuICAgIGNvbnN0IHJlY3ljbGVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdyZWN5Y2xlcklkJyk7XHJcbiAgICBjb25zdCBwZXJpb2QgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwZXJpb2QnKTsgLy8gZS5nLiAnbW9udGgnIG9yICd5ZWFyJ1xyXG5cclxuICAgIC8vIEZldGNoIHRyYW5zYWN0aW9ucyB3aXRoIHJlbGF0ZWQgZGF0YVxyXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlY3ljbGluZ190cmFuc2FjdGlvbnMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICBpZCxcclxuICAgICAgICBzZXNzaW9uX2lkLFxyXG4gICAgICAgIHF1YW50aXR5LFxyXG4gICAgICAgIGl0ZW1faWQsXHJcbiAgICAgICAgcmVjeWNsZXJfaWQsXHJcbiAgICAgICAgY29sbGVjdGlvbl9jZW50cmVfaWQsXHJcbiAgICAgICAgY3JlYXRlZF9hdCxcclxuICAgICAgICByZWN5Y2xlcjpyZWN5Y2xlcl9pZCAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIHB1YmxpY19pZCxcclxuICAgICAgICAgIGZ1bGxfbmFtZVxyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLmVxKCdjb2xsZWN0aW9uX2NlbnRyZV9pZCcsIGNvbGxlY3Rpb25DZW50cmVJZCk7XHJcblxyXG4gICAgLy8gT3B0aW9uYWw6IGZpbHRlciBieSBjdXJyZW50IG1vbnRoIG9yIGN1cnJlbnQgeWVhclxyXG4gICAgaWYgKHBlcmlvZCA9PT0gJ21vbnRoJyB8fCBwZXJpb2QgPT09ICd5ZWFyJykge1xyXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBsZXQgc3RhcnQ7XHJcbiAgICAgIGxldCBlbmQ7XHJcblxyXG4gICAgICBpZiAocGVyaW9kID09PSAnbW9udGgnKSB7XHJcbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIDEpO1xyXG4gICAgICAgIGVuZCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSArIDEsIDEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHllYXJcclxuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCAwLCAxKTtcclxuICAgICAgICBlbmQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSArIDEsIDAsIDEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBxdWVyeSA9IHF1ZXJ5XHJcbiAgICAgICAgLmd0ZSgnY3JlYXRlZF9hdCcsIHN0YXJ0LnRvSVNPU3RyaW5nKCkpXHJcbiAgICAgICAgLmx0KCdjcmVhdGVkX2F0JywgZW5kLnRvSVNPU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gSWYgcmVjeWNsZXJJZCBpcyBwcm92aWRlZCwgZmlsdGVyIGJ5IHRoYXQgcmVjeWNsZXJcclxuICAgIGlmIChyZWN5Y2xlcklkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3JlY3ljbGVyX2lkJywgcmVjeWNsZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiB0cmFuc2FjdGlvbnMsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBpdGVtIG5hbWVzIGZyb20gcmVjeWNsYWJsZV9pdGVtcyB0YWJsZVxyXG4gICAgY29uc3QgaXRlbUlkcyA9IFsuLi5uZXcgU2V0KHRyYW5zYWN0aW9ucy5tYXAodHggPT4gdHguaXRlbV9pZCkpXTtcclxuICAgIGNvbnN0IHsgZGF0YTogaXRlbXMgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdyZWN5Y2xhYmxlX2l0ZW1zJylcclxuICAgICAgLnNlbGVjdCgnaWQsIG5hbWUnKVxyXG4gICAgICAuaW4oJ2lkJywgaXRlbUlkcyk7XHJcblxyXG4gICAgY29uc3QgaXRlbU1hcCA9IHt9O1xyXG4gICAgaWYgKGl0ZW1zKSB7XHJcbiAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbU1hcFtpdGVtLmlkXSA9IGl0ZW0ubmFtZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2VpZ2h0LWJhc2VkIGl0ZW1zIChzdG9yZWQgYXMgZ3JhbXMsIG5lZWQgdG8gY29udmVydCBiYWNrIHRvIGtnKVxyXG4gICAgY29uc3Qgd2VpZ2h0QmFzZWRJdGVtcyA9IFszLCA1XTsgLy8gTmV3c3BhcGVyIGFuZCBDYXJkYm9hcmRcclxuICAgIFxyXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgcXVhbnRpdHkgYmFzZWQgb24gaXRlbSB0eXBlXHJcbiAgICBjb25zdCBnZXREaXNwbGF5UXVhbnRpdHkgPSAoaXRlbUlkLCBxdWFudGl0eSkgPT4ge1xyXG4gICAgICBpZiAod2VpZ2h0QmFzZWRJdGVtcy5pbmNsdWRlcyhpdGVtSWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHF1YW50aXR5IC8gMTAwMDsgLy8gQ29udmVydCBncmFtcyBiYWNrIHRvIGtnXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHF1YW50aXR5O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdG90YWxzIHBlciBpdGVtIGZvciB0aGUgY29sbGVjdGlvbiBjZW50cmVcclxuICAgIGNvbnN0IGNlbnRyZVRvdGFscyA9IHt9O1xyXG4gICAgdHJhbnNhY3Rpb25zLmZvckVhY2godHggPT4ge1xyXG4gICAgICBjb25zdCBpdGVtTmFtZSA9IGl0ZW1NYXBbdHguaXRlbV9pZF0gfHwgYEl0ZW0gJHt0eC5pdGVtX2lkfWA7XHJcbiAgICAgIGlmICghY2VudHJlVG90YWxzW2l0ZW1OYW1lXSkge1xyXG4gICAgICAgIGNlbnRyZVRvdGFsc1tpdGVtTmFtZV0gPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGNlbnRyZVRvdGFsc1tpdGVtTmFtZV0gKz0gZ2V0RGlzcGxheVF1YW50aXR5KHR4Lml0ZW1faWQsIHR4LnF1YW50aXR5KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbHMgcGVyIGl0ZW0gZm9yIGEgc3BlY2lmaWMgcmVjeWNsZXIgKGlmIHJlY3ljbGVySWQgcHJvdmlkZWQpXHJcbiAgICBjb25zdCByZWN5Y2xlclRvdGFscyA9IHt9O1xyXG4gICAgaWYgKHJlY3ljbGVySWQpIHtcclxuICAgICAgdHJhbnNhY3Rpb25zLmZvckVhY2godHggPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gaXRlbU1hcFt0eC5pdGVtX2lkXSB8fCBgSXRlbSAke3R4Lml0ZW1faWR9YDtcclxuICAgICAgICBpZiAoIXJlY3ljbGVyVG90YWxzW2l0ZW1OYW1lXSkge1xyXG4gICAgICAgICAgcmVjeWNsZXJUb3RhbHNbaXRlbU5hbWVdID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVjeWNsZXJUb3RhbHNbaXRlbU5hbWVdICs9IGdldERpc3BsYXlRdWFudGl0eSh0eC5pdGVtX2lkLCB0eC5xdWFudGl0eSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnZlcnQgdHJhbnNhY3Rpb24gcXVhbnRpdGllcyBmb3IgZGlzcGxheSAoZ3JhbXMgdG8ga2cgZm9yIHdlaWdodCBpdGVtcylcclxuICAgIGNvbnN0IGRpc3BsYXlUcmFuc2FjdGlvbnMgPSB0cmFuc2FjdGlvbnMubWFwKHR4ID0+ICh7XHJcbiAgICAgIC4uLnR4LFxyXG4gICAgICBkaXNwbGF5UXVhbnRpdHk6IGdldERpc3BsYXlRdWFudGl0eSh0eC5pdGVtX2lkLCB0eC5xdWFudGl0eSksXHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgdHJhbnNhY3Rpb25zOiBkaXNwbGF5VHJhbnNhY3Rpb25zLFxyXG4gICAgICBjZW50cmVUb3RhbHMsXHJcbiAgICAgIHJlY3ljbGVyVG90YWxzOiByZWN5Y2xlcklkID8gcmVjeWNsZXJUb3RhbHMgOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6IGVyci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJOZXh0UmVzcG9uc2UiLCJjb29raWVzIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkdFVCIsInJlcXVlc3QiLCJ1c2VyIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJzdGFydHNXaXRoIiwidG9rZW4iLCJzdWJzdHJpbmciLCJzdXBhYmFzZUNsaWVudCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZGF0YSIsImF1dGhVc2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0VXNlciIsImNvb2tpZVN0b3JlIiwibmFtZSIsInZhbHVlIiwiY29va2llVXNlciIsImNvb2tpZUVycm9yIiwianNvbiIsInN0YXR1cyIsImNvbGxlY3Rpb25DZW50cmVJZCIsImlkIiwic3VwYWJhc2UiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJyZWN5Y2xlcklkIiwicGVyaW9kIiwicXVlcnkiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJub3ciLCJEYXRlIiwic3RhcnQiLCJlbmQiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ3RlIiwidG9JU09TdHJpbmciLCJsdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwidHJhbnNhY3Rpb25zIiwibWVzc2FnZSIsIml0ZW1JZHMiLCJTZXQiLCJtYXAiLCJ0eCIsIml0ZW1faWQiLCJpdGVtcyIsImluIiwiaXRlbU1hcCIsImZvckVhY2giLCJpdGVtIiwid2VpZ2h0QmFzZWRJdGVtcyIsImdldERpc3BsYXlRdWFudGl0eSIsIml0ZW1JZCIsInF1YW50aXR5IiwiaW5jbHVkZXMiLCJjZW50cmVUb3RhbHMiLCJpdGVtTmFtZSIsInJlY3ljbGVyVG90YWxzIiwiZGlzcGxheVRyYW5zYWN0aW9ucyIsImRpc3BsYXlRdWFudGl0eSIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/staff/transactions/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();