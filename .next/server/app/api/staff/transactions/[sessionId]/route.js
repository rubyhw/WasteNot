"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/staff/transactions/[sessionId]/route";
exports.ids = ["app/api/staff/transactions/[sessionId]/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Ruby_Documents_1_Assignments_WasteNot_app_api_staff_transactions_sessionId_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/staff/transactions/[sessionId]/route.js */ \"(rsc)/./app/api/staff/transactions/[sessionId]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/staff/transactions/[sessionId]/route\",\n        pathname: \"/api/staff/transactions/[sessionId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/staff/transactions/[sessionId]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Ruby\\\\Documents\\\\1. Assignments\\\\WasteNot\\\\app\\\\api\\\\staff\\\\transactions\\\\[sessionId]\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Ruby_Documents_1_Assignments_WasteNot_app_api_staff_transactions_sessionId_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/staff/transactions/[sessionId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdGFmZiUyRnRyYW5zYWN0aW9ucyUyRiU1QnNlc3Npb25JZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3RhZmYlMkZ0cmFuc2FjdGlvbnMlMkYlNUJzZXNzaW9uSWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdGFmZiUyRnRyYW5zYWN0aW9ucyUyRiU1QnNlc3Npb25JZCU1RCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNSdWJ5JTVDRG9jdW1lbnRzJTVDMS4lMjBBc3NpZ25tZW50cyU1Q1dhc3RlTm90JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNSdWJ5JTVDRG9jdW1lbnRzJTVDMS4lMjBBc3NpZ25tZW50cyU1Q1dhc3RlTm90JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRDtBQUN2STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3dhc3Rlbm90Lz8zZGViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFJ1YnlcXFxcRG9jdW1lbnRzXFxcXDEuIEFzc2lnbm1lbnRzXFxcXFdhc3RlTm90XFxcXGFwcFxcXFxhcGlcXFxcc3RhZmZcXFxcdHJhbnNhY3Rpb25zXFxcXFtzZXNzaW9uSWRdXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvW3Nlc3Npb25JZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvW3Nlc3Npb25JZF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0YWZmL3RyYW5zYWN0aW9ucy9bc2Vzc2lvbklkXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFJ1YnlcXFxcRG9jdW1lbnRzXFxcXDEuIEFzc2lnbm1lbnRzXFxcXFdhc3RlTm90XFxcXGFwcFxcXFxhcGlcXFxcc3RhZmZcXFxcdHJhbnNhY3Rpb25zXFxcXFtzZXNzaW9uSWRdXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvW3Nlc3Npb25JZF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/staff/transactions/[sessionId]/route.js":
/*!*********************************************************!*\
  !*** ./app/api/staff/transactions/[sessionId]/route.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\nconst supabaseUrl = \"https://ggeqsopunlnzhmsxpkxq.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nasync function getAuthUser(request) {\n    let user = null;\n    // Try Authorization header first\n    const authHeader = request.headers.get(\"authorization\");\n    if (authHeader && authHeader.startsWith(\"Bearer \")) {\n        const token = authHeader.substring(7);\n        const supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\");\n        const { data: { user: authUser }, error: authError } = await supabaseClient.auth.getUser(token);\n        if (!authError && authUser) {\n            user = authUser;\n        }\n    }\n    // Fallback to cookies\n    if (!user) {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n        const supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\", {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                }\n            }\n        });\n        const { data: { user: cookieUser }, error: cookieError } = await supabaseClient.auth.getUser();\n        if (!cookieError && cookieUser) {\n            user = cookieUser;\n        }\n    }\n    return user;\n}\n// Update a session's transactions (edit)\nasync function PATCH(request, { params }) {\n    const { sessionId } = params;\n    try {\n        const body = await request.json();\n        const items = body.items || [];\n        if (!sessionId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const user = await getAuthUser(request);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\");\n        // Ensure session belongs to this collection centre\n        const { data: session, error: sessionError } = await supabase.from(\"recycling_sessions\").select(\"id, recycler_id, collection_centre_id\").eq(\"id\", sessionId).single();\n        if (sessionError || !session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (session.collection_centre_id !== user.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        // Filter valid items\n        const validItems = (items || []).filter((item)=>item.quantity && item.quantity > 0);\n        if (validItems.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"At least one item with quantity > 0 is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Weight-based items (kg) -> convert to grams\n        const weightBasedItems = [\n            3,\n            5\n        ]; // Newspaper, Cardboard\n        const transactions = validItems.map((item)=>{\n            let quantity = item.quantity;\n            if (weightBasedItems.includes(item.itemId)) {\n                quantity = Math.round(quantity * 1000);\n            } else {\n                quantity = Math.round(quantity);\n            }\n            return {\n                session_id: sessionId,\n                recycler_id: session.recycler_id,\n                collection_centre_id: session.collection_centre_id,\n                item_id: item.itemId,\n                quantity\n            };\n        });\n        // Delete existing transactions for this session\n        const { error: deleteError } = await supabase.from(\"recycling_transactions\").delete().eq(\"session_id\", sessionId);\n        if (deleteError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Failed to update session: ${deleteError.message}`\n            }, {\n                status: 500\n            });\n        }\n        // Insert new transactions\n        const { error: insertError } = await supabase.from(\"recycling_transactions\").insert(transactions);\n        if (insertError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Failed to update transactions: ${insertError.message}`\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Delete a session and its transactions\nasync function DELETE(request, { params }) {\n    const { sessionId } = params;\n    try {\n        if (!sessionId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const user = await getAuthUser(request);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdnZXFzb3B1bmxuemhtc3hwa3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTY0MTMsImV4cCI6MjA4MDk3MjQxM30.wi6hqzuxCg9j5jDCrpJ0QtMkYDqE8nlZKnpGfS7lItE\");\n        // Ensure session belongs to this collection centre\n        const { data: session, error: sessionError } = await supabase.from(\"recycling_sessions\").select(\"id, collection_centre_id\").eq(\"id\", sessionId).single();\n        if (sessionError || !session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (session.collection_centre_id !== user.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        // Delete transactions first\n        const { error: txError } = await supabase.from(\"recycling_transactions\").delete().eq(\"session_id\", sessionId);\n        if (txError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Failed to delete transactions: ${txError.message}`\n            }, {\n                status: 500\n            });\n        }\n        // Delete the session\n        const { error: sessionDeleteError } = await supabase.from(\"recycling_sessions\").delete().eq(\"id\", sessionId);\n        if (sessionDeleteError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Failed to delete session: ${sessionDeleteError.message}`\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N0YWZmL3RyYW5zYWN0aW9ucy9bc2Vzc2lvbklkXS9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxRDtBQUNWO0FBQ0o7QUFFdkMsTUFBTUcsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLHFCQUFxQkgsUUFBUUMsR0FBRyxDQUFDRyx5QkFBeUI7QUFFaEUsZUFBZUMsWUFBWUMsT0FBTztJQUNoQyxJQUFJQyxPQUFPO0lBRVgsaUNBQWlDO0lBQ2pDLE1BQU1DLGFBQWFGLFFBQVFHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3ZDLElBQUlGLGNBQWNBLFdBQVdHLFVBQVUsQ0FBQyxZQUFZO1FBQ2xELE1BQU1DLFFBQVFKLFdBQVdLLFNBQVMsQ0FBQztRQUNuQyxNQUFNQyxpQkFBaUJsQixtRUFBWUEsQ0FDakNHLGFBQ0FDLGtOQUF5QztRQUUzQyxNQUFNLEVBQUVnQixNQUFNLEVBQUVULE1BQU1VLFFBQVEsRUFBRSxFQUFFQyxPQUFPQyxTQUFTLEVBQUUsR0FDbEQsTUFBTUwsZUFBZU0sSUFBSSxDQUFDQyxPQUFPLENBQUNUO1FBQ3BDLElBQUksQ0FBQ08sYUFBYUYsVUFBVTtZQUMxQlYsT0FBT1U7UUFDVDtJQUNGO0lBRUEsc0JBQXNCO0lBQ3RCLElBQUksQ0FBQ1YsTUFBTTtRQUNULE1BQU1lLGNBQWMsTUFBTXhCLHFEQUFPQTtRQUNqQyxNQUFNZ0IsaUJBQWlCbEIsbUVBQVlBLENBQ2pDRyxhQUNBQyxrTkFBeUMsRUFDekM7WUFDRUYsU0FBUztnQkFDUFksS0FBSWEsSUFBSTtvQkFDTixPQUFPRCxZQUFZWixHQUFHLENBQUNhLE9BQU9DO2dCQUNoQztZQUNGO1FBQ0Y7UUFFRixNQUFNLEVBQUVSLE1BQU0sRUFBRVQsTUFBTWtCLFVBQVUsRUFBRSxFQUFFUCxPQUFPUSxXQUFXLEVBQUUsR0FDdEQsTUFBTVosZUFBZU0sSUFBSSxDQUFDQyxPQUFPO1FBQ25DLElBQUksQ0FBQ0ssZUFBZUQsWUFBWTtZQUM5QmxCLE9BQU9r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QUFJO1FBQXdCLEdBQ2hEO1lBQUUzQixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dhc3Rlbm90Ly4vYXBwL2FwaS9zdGFmZi90cmFuc2FjdGlvbnMvW3Nlc3Npb25JZF0vcm91dGUuanM/ZTU4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5cclxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XHJcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRBdXRoVXNlcihyZXF1ZXN0KSB7XHJcbiAgbGV0IHVzZXIgPSBudWxsO1xyXG5cclxuICAvLyBUcnkgQXV0aG9yaXphdGlvbiBoZWFkZXIgZmlyc3RcclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xyXG4gIGlmIChhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gICAgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoXHJcbiAgICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyOiBhdXRoVXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPVxyXG4gICAgICBhd2FpdCBzdXBhYmFzZUNsaWVudC5hdXRoLmdldFVzZXIodG9rZW4pO1xyXG4gICAgaWYgKCFhdXRoRXJyb3IgJiYgYXV0aFVzZXIpIHtcclxuICAgICAgdXNlciA9IGF1dGhVc2VyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmFsbGJhY2sgdG8gY29va2llc1xyXG4gIGlmICghdXNlcikge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb25zdCBzdXBhYmFzZUNsaWVudCA9IGNyZWF0ZUNsaWVudChcclxuICAgICAgc3VwYWJhc2VVcmwsXHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZLFxyXG4gICAgICB7XHJcbiAgICAgICAgY29va2llczoge1xyXG4gICAgICAgICAgZ2V0KG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldChuYW1lKT8udmFsdWU7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogY29va2llVXNlciB9LCBlcnJvcjogY29va2llRXJyb3IgfSA9XHJcbiAgICAgIGF3YWl0IHN1cGFiYXNlQ2xpZW50LmF1dGguZ2V0VXNlcigpO1xyXG4gICAgaWYgKCFjb29raWVFcnJvciAmJiBjb29raWVVc2VyKSB7XHJcbiAgICAgIHVzZXIgPSBjb29raWVVc2VyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSBhIHNlc3Npb24ncyB0cmFuc2FjdGlvbnMgKGVkaXQpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XHJcbiAgY29uc3QgeyBzZXNzaW9uSWQgfSA9IHBhcmFtcztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IGl0ZW1zID0gYm9keS5pdGVtcyB8fCBbXTtcclxuXHJcbiAgICBpZiAoIXNlc3Npb25JZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1Nlc3Npb24gSUQgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKHJlcXVlc3QpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBzdXBhYmFzZVVybCxcclxuICAgICAgc3VwYWJhc2VTZXJ2aWNlS2V5IHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEVuc3VyZSBzZXNzaW9uIGJlbG9uZ3MgdG8gdGhpcyBjb2xsZWN0aW9uIGNlbnRyZVxyXG4gICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uLCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncmVjeWNsaW5nX3Nlc3Npb25zJylcclxuICAgICAgLnNlbGVjdCgnaWQsIHJlY3ljbGVyX2lkLCBjb2xsZWN0aW9uX2NlbnRyZV9pZCcpXHJcbiAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoc2Vzc2lvbkVycm9yIHx8ICFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnU2Vzc2lvbiBub3QgZm91bmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNlc3Npb24uY29sbGVjdGlvbl9jZW50cmVfaWQgIT09IHVzZXIuaWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdGb3JiaWRkZW4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsdGVyIHZhbGlkIGl0ZW1zXHJcbiAgICBjb25zdCB2YWxpZEl0ZW1zID0gKGl0ZW1zIHx8IFtdKS5maWx0ZXIoXHJcbiAgICAgIChpdGVtKSA9PiBpdGVtLnF1YW50aXR5ICYmIGl0ZW0ucXVhbnRpdHkgPiAwXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh2YWxpZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0F0IGxlYXN0IG9uZSBpdGVtIHdpdGggcXVhbnRpdHkgPiAwIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdlaWdodC1iYXNlZCBpdGVtcyAoa2cpIC0+IGNvbnZlcnQgdG8gZ3JhbXNcclxuICAgIGNvbnN0IHdlaWdodEJhc2VkSXRlbXMgPSBbMywgNV07IC8vIE5ld3NwYXBlciwgQ2FyZGJvYXJkXHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gdmFsaWRJdGVtcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IHF1YW50aXR5ID0gaXRlbS5xdWFudGl0eTtcclxuICAgICAgaWYgKHdlaWdodEJhc2VkSXRlbXMuaW5jbHVkZXMoaXRlbS5pdGVtSWQpKSB7XHJcbiAgICAgICAgcXVhbnRpdHkgPSBNYXRoLnJvdW5kKHF1YW50aXR5ICogMTAwMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcXVhbnRpdHkgPSBNYXRoLnJvdW5kKHF1YW50aXR5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXHJcbiAgICAgICAgcmVjeWNsZXJfaWQ6IHNlc3Npb24ucmVjeWNsZXJfaWQsXHJcbiAgICAgICAgY29sbGVjdGlvbl9jZW50cmVfaWQ6IHNlc3Npb24uY29sbGVjdGlvbl9jZW50cmVfaWQsXHJcbiAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtSWQsXHJcbiAgICAgICAgcXVhbnRpdHksXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEZWxldGUgZXhpc3RpbmcgdHJhbnNhY3Rpb25zIGZvciB0aGlzIHNlc3Npb25cclxuICAgIGNvbnN0IHsgZXJyb3I6IGRlbGV0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncmVjeWNsaW5nX3RyYW5zYWN0aW9ucycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ3Nlc3Npb25faWQnLCBzZXNzaW9uSWQpO1xyXG5cclxuICAgIGlmIChkZWxldGVFcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogYEZhaWxlZCB0byB1cGRhdGUgc2Vzc2lvbjogJHtkZWxldGVFcnJvci5tZXNzYWdlfWAgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnNlcnQgbmV3IHRyYW5zYWN0aW9uc1xyXG4gICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdyZWN5Y2xpbmdfdHJhbnNhY3Rpb25zJylcclxuICAgICAgLmluc2VydCh0cmFuc2FjdGlvbnMpO1xyXG5cclxuICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogYEZhaWxlZCB0byB1cGRhdGUgdHJhbnNhY3Rpb25zOiAke2luc2VydEVycm9yLm1lc3NhZ2V9YCB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6IGVyci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlbGV0ZSBhIHNlc3Npb24gYW5kIGl0cyB0cmFuc2FjdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XHJcbiAgY29uc3QgeyBzZXNzaW9uSWQgfSA9IHBhcmFtcztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGlmICghc2Vzc2lvbklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnU2Vzc2lvbiBJRCBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0QXV0aFVzZXIocmVxdWVzdCk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXHJcbiAgICAgIHN1cGFiYXNlVXJsLFxyXG4gICAgICBzdXBhYmFzZVNlcnZpY2VLZXkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcclxuICAgICk7XHJcblxyXG4gICAgLy8gRW5zdXJlIHNlc3Npb24gYmVsb25ncyB0byB0aGlzIGNvbGxlY3Rpb24gY2VudHJlXHJcbiAgICBjb25zdCB7IGRhdGE6IHNlc3Npb24sIGVycm9yOiBzZXNzaW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdyZWN5Y2xpbmdfc2Vzc2lvbnMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgY29sbGVjdGlvbl9jZW50cmVfaWQnKVxyXG4gICAgICAuZXEoJ2lkJywgc2Vzc2lvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1Nlc3Npb24gbm90IGZvdW5kJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZXNzaW9uLmNvbGxlY3Rpb25fY2VudHJlX2lkICE9PSB1c2VyLmlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRm9yYmlkZGVuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlbGV0ZSB0cmFuc2FjdGlvbnMgZmlyc3RcclxuICAgIGNvbnN0IHsgZXJyb3I6IHR4RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdyZWN5Y2xpbmdfdHJhbnNhY3Rpb25zJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnc2Vzc2lvbl9pZCcsIHNlc3Npb25JZCk7XHJcblxyXG4gICAgaWYgKHR4RXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGBGYWlsZWQgdG8gZGVsZXRlIHRyYW5zYWN0aW9uczogJHt0eEVycm9yLm1lc3NhZ2V9YCB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlbGV0ZSB0aGUgc2Vzc2lvblxyXG4gICAgY29uc3QgeyBlcnJvcjogc2Vzc2lvbkRlbGV0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncmVjeWNsaW5nX3Nlc3Npb25zJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpO1xyXG5cclxuICAgIGlmIChzZXNzaW9uRGVsZXRlRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGBGYWlsZWQgdG8gZGVsZXRlIHNlc3Npb246ICR7c2Vzc2lvbkRlbGV0ZUVycm9yLm1lc3NhZ2V9YCB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6IGVyci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwiY29va2llcyIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJnZXRBdXRoVXNlciIsInJlcXVlc3QiLCJ1c2VyIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJzdGFydHNXaXRoIiwidG9rZW4iLCJzdWJzdHJpbmciLCJzdXBhYmFzZUNsaWVudCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZGF0YSIsImF1dGhVc2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0VXNlciIsImNvb2tpZVN0b3JlIiwibmFtZSIsInZhbHVlIiwiY29va2llVXNlciIsImNvb2tpZUVycm9yIiwiUEFUQ0giLCJwYXJhbXMiLCJzZXNzaW9uSWQiLCJib2R5IiwianNvbiIsIml0ZW1zIiwic3RhdHVzIiwic3VwYWJhc2UiLCJzZXNzaW9uIiwic2Vzc2lvbkVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY29sbGVjdGlvbl9jZW50cmVfaWQiLCJpZCIsInZhbGlkSXRlbXMiLCJmaWx0ZXIiLCJpdGVtIiwicXVhbnRpdHkiLCJsZW5ndGgiLCJ3ZWlnaHRCYXNlZEl0ZW1zIiwidHJhbnNhY3Rpb25zIiwibWFwIiwiaW5jbHVkZXMiLCJpdGVtSWQiLCJNYXRoIiwicm91bmQiLCJzZXNzaW9uX2lkIiwicmVjeWNsZXJfaWQiLCJpdGVtX2lkIiwiZGVsZXRlRXJyb3IiLCJkZWxldGUiLCJtZXNzYWdlIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJzdWNjZXNzIiwiZXJyIiwiREVMRVRFIiwidHhFcnJvciIsInNlc3Npb25EZWxldGVFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/staff/transactions/[sessionId]/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&page=%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstaff%2Ftransactions%2F%5BsessionId%5D%2Froute.js&appDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRuby%5CDocuments%5C1.%20Assignments%5CWasteNot&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();